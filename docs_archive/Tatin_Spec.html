<!DOCTYPE html>
<html lang="en" style="scroll-behavior:smooth" >
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>Tatin</title>
<style media="screen">
html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;}body{margin:0;}article,aside,footer,header,nav,section{display:block;}h1{font-size:2em;margin:0.67em 0;}figcaption,figure,main{display:block;}figure{margin:1em 40px;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace, monospace;font-size:1em;}a{background-color:transparent;-webkit-text-decoration-skip:objects;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:inherit;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace, monospace;font-size:1em;}dfn{font-style:italic;}mark{background-color:#ff0;color:#000;}small{font-size:0.8em;}sub,sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}audio,video{display:inline-block;}audio:not([controls]){display:none;height:0;}img{border-style:none;}svg:not(:root){overflow:hidden;}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:1em;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,html [type="button"], [type="reset"],[type="submit"]{-webkit-appearance:button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{display:inline-block;vertical-align:baseline;}textarea{overflow:auto;}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px;}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details, menu{display:block;}summary{display:list-item;}canvas{display:inline-block;}template{display:none;}[hidden]{display:none;}body{margin:0;font-family:"Bookman Old Style", "Callisto MT", Bookman, "Goudy Old Style", Garamond, serif;background-color:#fdfdfd;font-size:18px;line-height:1.4;max-width:1200px;padding:0.83em;color:#292929;word-wrap:break-word;overflow-wrap:break-word;}h1, h2, h3, h4, h5, h6{color:#404040;font-weight:800;padding-left:0;}h1, h2, h3, h4, h5, h6{font-family:"Century Gothic", Verdana, "Sans";}h1, h2, h3, h4, p{margin-bottom:0.88em;}h1{font-size:1.8em;margin:0.27em 0 1.11em 0;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:1em;background-color:inherit;}h2{font-size:1.44em;margin:0.55em 0 0.55em 0;padding-top:0.55em;border-bottom:1px solid Silver;}h3{margin:0;margin-top:0.55em;font-size:1.22em;}nav h3{font-size:0.88em;margin-left:0.83em;margin-bottom:0.27em;}h4{font-size:1em;margin:0;margin-top:0.55em;}h5{font-size:0.94em;margin:0;margin-top:0.66em;padding:0;}h6{font-size:0.88em;margin:0;margin-top:0.66em;padding:0;}a{color:#0099ff;margin:0;padding:0;vertical-align:baseline;}a:visited{color:purple;}a.autoheader_anchor{text-decoration:none;}ul{list-style-type:disc;}ul, ol{padding:0;margin:0;}dd{padding-top:0.25em;}p.first_dd{padding-top:0.25em;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:1.38em;margin-bottom:0.55em;}ul > li{margin-left:2.5em;}ol > li{margin-left:2.5em;}li ul{margin-left:0.55em;}li ul{margin-left:0.27em;}li p{padding:1px 0 0 0;margin:0.55em 0 0.27em 0;line-height:1.3;}ul, ol{line-height:1.3;padding:0.33em 0 0 0;margin:0.5em;}p{line-height:1.2;padding:0.40em 0 0 0;margin:0;}pre{overflow:scroll;padding:0.55em 0.27em;margin:0.55em 0 0.55em 0 !important;background-color:#faebd7;color:#3e3e3e;border:1px Silver dashed;display:block;font-family:APLFont, monospace;font-weight:normal;white-space:pre-wrap;}pre > code{line-height:1.2;border:0;padding:0;margin:0;background-color:inherit;color:inherit;font-weight:inherit;white-space:pre-wrap;}td code{padding:0;}a code{padding:0;font-size:1em;}nav code{background-color:inherit;font-weight:400;color:inherit;}code{font-family:APLFont, monospace;color:Black;font-weight:800;line-height:1.2;font-size:0.88em;margin:0;color:#950000;padding:0 0.16em;}tbody tr:nth-child(even){background-color:#F0F0F0;}th{background-color:#E6E6E6;color:black;}th, td{padding:0.16em 0.55em;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table{border-color:Black;margin:1.5em 0;border:2px black;border-collapse:collapse;font-family:APLFont;font-size:0.88em;line-height:1.2;border:1px solid Gray;}li > table{margin:0.55em 0 0.55em 0;}tr{margin:1.11em;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:0.27em solid silver;padding-left:0.27em;margin:0.83em 0.27em 0.83em 0.55em;}blockquote ul li{margin-left:1.38em;}blockquote ol li{margin-left:1.38em;}li > blockquote{margin-left:0;}nav{background-color:#f5f5f5;border:1px solid Black;padding:0.55em;margin:0.55em;margin-right:0;box-shadow:0.27em 0.27em 0.27em Gray;overflow:hidden;clear:both;}nav#main_nav{position:fixed;top:0;right:0.55em;float:none;width:auto;}nav#main_nav_no_collapse li{font-size:0.77rem;}nav#main_nav_no_collapse li{line-height:1.5;}nav ul{list-style-type:none;margin:0 0 0.11em 0;padding:0;}nav a:visited{color:black;}nav ul li{margin-bottom:0.16em;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:0.75rem;line-height:1.3;padding:0;margin-top:0;margin-bottom:0;margin-left:0.83em;}nav p{font-weight:bold;font-size:0.75rem;padding-top:0;}dl{margin-top:0.1em;margin-bottom:0.1em;}dt{margin-top:0.75em;margin-bottom:0.1em;font-weight:800;}label#hide_toc_label{font-size:0.8em;}.toc-container{position:relative;height:auto;}div.toc-container h1{font-size:0.88em;margin:0.27em 0 0.27em 0;}[type="checkbox"]{position:absolute;left:-9999px;}label{display:block;width:100%;height:1.1em;cursor:pointer;top:0;padding-left:1.1em;}label:before{content:'Table of contents \25BC';font-weight:bold;font-size:90%;padding-bottom:0;}[type="checkbox"] ~ div{display:none;}[type="checkbox"]:checked ~ div{display:block;margin-top:1.1em;}[type="checkbox"]:checked + label{top:100%;}[type="checkbox"]:checked + label:before{content:'Table of contents ‚ñ≤';}div#footnotes_div p{line-height:1;padding-bottom:0;padding-top:0;}div#footnotes_div ol{padding-top:0;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_display{display:none;}.red{color:red;}.center{text-align:center;margin-left:auto;margin-right:auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}img{margin-top:0.55em;margin-bottom:0.27em;}div.leanpub{padding:0.83em 0.55em 1.11em 0;margin:0.55em 0 0 0.27em;overflow:auto;}div.leanpub_A{border:1px solid black;background-color:#f1f1f1;padding:0.55em;margin:1.11em 0 0.83em 0;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:0.27em 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:0.27em 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 1.11em 0.27em 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub img{float:left;padding:0;margin:0.55em 1.11em 0 0;clear:both;}div.leanpub tbody *{background-color:transparent;}div.leanpub p{padding:0.17em 0 0 0;margin:0;}span.leanpub_code{color:Red;}div.leanpub p{display:block;padding:0.44em 0 0 0;}div.leanpub > div{margin-left:2.27em;}.print_only{display:none;}
</style>
<style media="print">
@page{margin:25mm 20mm 25mm 20mm;}body{font-family:"Bookman Old Style", "Callisto MT", Bookman,"Goudy Old Style", Garamond, serif;font-size:9pt;line-height:1.2;}h1{font-size:170%;}h2{font-size:110%;}h3{font-size:110%;}h4{font-size:105%;}h5{font-size:100%;}h6{font-size:95%;}h1{margin:0 0 20pt 0;}h2{margin:15pt 0 3pt 0;}h3{margin:10pt 0 0pt 0;}h4{margin:10pt 0 0pt 0;}h5{margin:9pt 0 0pt 0;}h6{margin:9pt 0 0pt 0;}h1, h2, h3, h4, h5, h6{color:black;font-family:"Century Gothic", Verdana, "Sans";page-break-after:avoid;}h1 > code, h2 > code, h3 > code, h4 > code, h5 > code, h6 > code{font-size:100%;}h2{border-bottom:1pt solid Silver;padding-bottom:2pt;}.h_tag{page-break-after:avoid;break-after:avoid;}abbr[title]{border-bottom:0;text-decoration:none;}a{color:black;margin:0;padding:0;vertical-align:baseline;text-decoration:none;font-style:italic;}a.autoheader_anchor{text-decoration:none;font-style:normal;page-break-after:avoid;break-after:avoid;}ul{list-style-type:square;}ul, ol{padding:0;margin:0;}li > ul, ol{padding-bottom:0;}li{line-height:1.3;margin-left:13pt;margin-bottom:5pt;}ul > li{margin-left:25pt;}ol > li{margin-left:25pt;}li ul{margin-left:5pt;}li ul{margin-left:3pt;}li p{padding:1pt 0 0 0;margin:5pt 0 3pt 0;line-height:1.3;}p, ul, ol{line-height:1.3;padding:4pt 0 0 0;margin:0;color:black;}ul, ol{margin-top:0.75em;}pre{padding:3pt;margin:5pt 0;white-space:pre-wrap;background-color:#FAFAFA;border:1pt Silver solid;display:block;font-family:APLFont, monospace;page-break-inside:avoid;}pre code{background-color:#FAFAFA;color:Black;padding:0;margin:0 0 -6pt 0;line-height:1.1;border:0;white-space:pre-wrap;}code{font-family:APLFont, monospace;line-height:1.2;font-size:9pt;padding:3pt 1pt 3pt 1pt;color:#950000;padding:3pt 4pt 3pt 4pt;}tbody th, tfoot tr{background-color:#e6e6e6;}tbody tr:nth-child(even){background-color:#fafafa;}th{background-color:#F0F0F0;}th, td{padding:1pt 5pt;border:1px solid #E3E3E3;vertical-align:top;}table td + td{border-left:1px solid gray;}table th + th{border-left:1px solid gray;}table code{font-style:normal;padding-left:0;padding-right:0;}table{margin:1.5em 0;font-family:APLFont;font-size:9pt;padding:0;border:1pt solid silver;border-collapse:collapse;}li > table{margin:10pt 0 10pt 0;}tr{margin:20pt;}th{font-weight:bold;}tfoot td{font-weight:bold;}blockquote{border-left:5pt solid silver;padding-left:5pt;margin:8pt 3pt 8pt 8pt;}nav{background-color:#f8f8f8;border:1pt solid Gray;width:auto;float:right;padding:5pt 5pt 5pt 0;margin:5pt 0 5pt 5pt;page-break-inside:avoid;break-inside:avoid;clear:both;overflow:hidden;}nav *{font-size:75%;}nav ul{list-style-type:none;margin:0 0 2pt 0;padding:0;}nav ul li{margin-bottom:0;}nav li p{margin:0;padding:0;line-height:1;margin:0;padding:0;}nav li{font-size:9pt;line-height:1;padding:0;margin-top:0;margin-bottom:0;margin-left:8pt;}dl{margin-top:0;margin-bottom:10pt;}dt{margin-top:10pt;margin-bottom:0;font-weight:800;page-break-inside:avoid;}dd{margin-top:2pt;}label#hide_toc_label{font-size:65%;}.toc-container{position:relative;height:auto;margin-top:2pt;background-color:inherit;}.toc-container h3{margin:0 0 2pt 7pt;}[type="checkbox"]{display:none;}label{display:block;width:100%;height:1.1em;top:0;padding-left:10pt;}label:before{content:'Table of contents';font-weight:bold;font-size:140%;padding-bottom:10pt;}a.external_link::before{content:" üåé";}a.bookmark_link::before{content:" ‚ûØ";}a.mailto_link::before{content:" ‚úâ"}nav a.bookmark_link{font-style:normal;}nav p{margin-left:10pt;font-weight:bold;font-size:9pt;}nav a{font-style:normal;}nav a.bookmark_link::before{content:"";}div#footnotes_div a::before{content:"";}div#footnotes_div a{font-style:normal;}div#footnotes_div{page-break-inside:avoid;}@font-face{font-family:"APLFont";src:local("APL385 Unicode"), url("https://misc.aplteam.com/apl385.ttf") format("truetype");}.no_print{display:none;}.red{color:red;}.center{text-align:center;margin:0 auto;}.left{text-align:left;margin-right:0 auto;}.right{text-align:right;margin-left:0 auto;}.avoid_page_break{page-break-inside:avoid;}.page_break_before{page-break-before:always;}div.leanpub{margin:10pt 0 10pt 8pt;page-break-inside:avoid;}div.leanpub_A{border:1pt solid black;background-color:#f9f9f9;padding:5pt;margin:10pt 0 10pt 0;page-break-inside:avoid;}div.leanpub h3, div.leanpub_A h3{font-size:1.2em;padding:3pt 0 0 0;margin:0;}div.leanpub h4, div.leanpub_A h4{font-size:1.1em;padding:3pt 0 0 0;margin:0;}div.leanpub h5, div.leanpub h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub_A h5, div.leanpub_A h5{font-size:1.0em;padding:3pt 0 0 0;margin:0;}div.leanpub img{padding:0;margin:0 10pt 2pt 0;}div.leanpub_A > p:first-child{padding-top:0;margin-top:0;}div.leanpub > div > h1:first-child{padding-top:5pt;}div.leanpub img{float:left;padding:0;margin:5pt 10pt 0 0;clear:both;}div.leanpub p{padding:3pt 0 0 0;margin:0;}span.leanpub_code{font-weight:bold;}div.leanpub p{display:block;padding:8pt 0 0 0;}div.leanpub > div{margin-left:35pt;}sup{font-size:0.75em;line-height:0;position:relative;vertical-align:baseline;top:-0.4em;}
</style>
<meta name="author" content="kai">
</head>
<body>
<nav id="main_nav">
<input type="checkbox" id="hide_toc">
<label id="hide_toc_label" for="hide_toc"></label>
<div class="toc-container">
<ul>
<li><a href="#Tatin">1. Tatin</a>
<ul>
<li><a href="#Overview">1.1. Overview</a></li>
<li><a href="#Terms">1.2. Terms</a>
<ul>
<li><a href="#Project">1.2.1. Project</a></li>
<li><a href="#pkg_def">1.2.2. Package</a></li>
<li><a href="#Package-ID">1.2.3. Package ID</a></li>
<li><a href="#Registry">1.2.4. Registry</a></li>
<li><a href="#Alias">1.2.5. Alias</a>
<ul>
<li><a href="#Registry-alias">1.2.5.1. Registry alias</a></li>
<li><a href="#Package-alias">1.2.5.2. Package alias</a></li>
</ul></li>
</ul></li>
<li><a href="#The-Modules">1.3. The Modules</a></li>
<li><a href="#Loading-Tatin-into-SE">1.4. Loading Tatin into <code>‚éïSE</code></a></li>
<li><a href="#Loading-packages-into-the-workspace">1.5. Loading packages into the workspace</a></li>
<li><a href="#Client">1.6. Client (<code>Tatin.Client</code>)</a>
<ul>
<li><a href="#API">1.6.1. API</a>
<ul>
<li><a href="#The-InitialisePackage-method">1.6.1.1. The ‚ÄúInitialisePackage‚Äù method</a></li>
<li><a href="#The-Pack-method">1.6.1.2. The ‚ÄúPack‚Äù method</a></li>
<li><a href="#The-PublishPackage-method">1.6.1.3. The ‚ÄúPublishPackage‚Äù method</a></li>
<li><a href="#Retrieving-packages">1.6.1.4. Retrieving packages</a>
<ul>
<li><a href="#The-identifier">1.6.1.4.1. The ‚Äúidentifier‚Äù</a>
<ul>
<li><a href="#Registry-scan">1.6.1.4.1.1. Registry scan</a></li>
</ul></li>
<li><a href="#InstallPackage">1.6.1.4.2. ‚ÄúInstallPackage‚Äù</a></li>
<li><a href="#UninstallPackage">1.6.1.4.3. ‚ÄúUninstallPackage‚Äù</a></li>
<li><a href="#LoadDependencies">1.6.1.4.4. ‚ÄúLoadDependencies‚Äù</a></li>
<li><a href="#LoadPackage">1.6.1.4.5. ‚ÄúLoadPackage‚Äù</a></li>
<li><a href="#Loading-into-the-workspace">1.6.1.4.6. Loading into the workspace</a></li>
</ul></li>
</ul></li>
<li><a href="#Client-Settings">1.6.2. Client Settings</a></li>
</ul></li>
<li><a href="#Server">1.7. Server (<code>Tatin.Server</code>)</a>
<ul>
<li><a href="#Errors">1.7.1. Errors</a></li>
<li><a href="#ContentType">1.7.2. ContentType</a></li>
<li><a href="#ServerAPI">1.7.3. API</a>
<ul>
<li><a href="#List-packages">1.7.3.1. List packages</a></li>
<li><a href="#server_publish_package">1.7.3.2. Publish a package</a></li>
<li><a href="#Get-package">1.7.3.3. Get package</a></li>
</ul></li>
</ul></li>
<li><a href="#Tatin-Registry">1.8. Registry (<code>Tatin_Registry</code>)</a>
<ul>
<li><a href="#regapi">1.8.1. API</a>
<ul>
<li><a href="#The-CreateRegistry-method">1.8.1.1. The <code>CreateRegistry</code> method</a></li>
<li><a href="#create_index">1.8.1.2. The <code>Index.Create</code> method</a></li>
<li><a href="#Reg_ListPackages">1.8.1.3. The <code>ListPackages</code> method</a></li>
<li><a href="#Reg_ListPackageVersions">1.8.1.4. The <code>ListPackageVersions</code> method</a></li>
<li><a href="#registry_publish_package">1.8.1.5. The <code>PublishPackage</code> method</a></li>
<li><a href="#GetPackage">1.8.1.6. The <code>GetPackage</code> method</a></li>
<li><a href="#Withdrawing-a-package">1.8.1.7. Withdrawing a package (Delete)</a></li>
<li><a href="#Updating-a-package">1.8.1.8. Updating a package</a></li>
</ul></li>
</ul></li>
<li><a href="#Misc">1.9. Misc</a>
<ul>
<li><a href="#Config-and-meta-files">1.9.1. Config and meta files</a>
<ul>
<li><a href="#Client-config-file">1.9.1.1. Client config file</a></li>
<li><a href="#Package-config-file">1.9.1.2. Package config file</a></li>
<li><a href="#Dependency-file">1.9.1.3. Dependency file</a></li>
<li><a href="#Build-List">1.9.1.4. Build List</a></li>
</ul></li>
<li><a href="#Data-storage-in-Registries">1.9.2. Data storage in Registries</a>
<ul>
<li><a href="#Overview-1">1.9.2.1. Overview</a></li>
<li><a href="#Example-for-a-Registry">1.9.2.2. Example for a Registry</a></li>
</ul></li>
</ul></li>
<li><a href="#CPU-versus-disk-space">1.10. CPU versus disk space</a>
<ul>
<li><a href="#Authentication">1.10.1. Authentication</a>
</li></ul></li>
</li></ul></li>
</ul>
</div>
</nav>
<div class="h_tag">
<a href="#Tatin" id="Tatin" class="autoheader_anchor">
<h1 data-id="Tatin">1. Tatin</h1>
</a>
</div>
<div class="h_tag">
<a href="#Overview" id="Overview" class="autoheader_anchor">
<h2 data-id="Overview">1.1. Overview</h2>
</a>
</div>
<p>Tatin is a package manager written in APL, targeting APL developers.</p>
<div class="h_tag">
<a href="#Terms" id="Terms" class="autoheader_anchor">
<h2 data-id="Terms">1.2. Terms</h2>
</a>
</div>
<div class="h_tag">
<a href="#Project" id="Project" class="autoheader_anchor">
<h3 data-id="Project">1.2.1. Project</h3>
</a>
</div>
<p>In this document the term ‚Äúproject‚Äù is loosely used to refer to anything that contains files that can be converted into a package.</p>
<p>A project may contain files and folders that aid in the development of the package, but are not included in the resulting package. The management of the project is outside the scope of Tatin. The only requirement is that source code is stored in a format supported by Link. For project management consider Link[<a href="#fnref1" class="footnote_link"><sup>1</sup></a>] or acre[<a href="#fnref2" class="footnote_link"><sup>2</sup></a>] combined with a version control system like Git[<a href="#fnref3" class="footnote_link"><sup>3</sup></a>].</p>
<div class="h_tag">
<a href="#pkg_def" id="pkg_def" class="autoheader_anchor">
<h3 data-id="pkg_def">1.2.2. Package</h3>
</a>
</div>
<p>A package provides a module of code with a clearly defined API. These modules form building blocks for the development of other modules or applications. A package may therefore depend on other packages and consume them via their APIs.</p>
<p>A package consists of:</p>
<ul>
<li>A file <a href="#Package-config-file" class="bookmark_link">describing the package</a>.</li>
<li>A file defining the <a href="#Dependency-file" class="bookmark_link">dependencies</a> of the package, if any.</li>
<li>Source code must be one of:
<ul>
<li>A single file</li>
<li>A single folder</li>
</ul></li>
</ul>
<p>A package name must:</p>
<ol start="1">
<li>be a valid APL name.</li>
<li>consist of nothing but ASCII (<strong>not</strong> ANSI) characters.</li>
</ol>
<div class="h_tag">
<a href="#Package-ID" id="Package-ID" class="autoheader_anchor">
<h3 data-id="Package-ID">1.2.3. Package ID</h3>
</a>
</div>
<p>Within a Registry a package is uniquely identified by its <code>group</code>, <code>name</code> and <code>version</code>.</p>
<p>The ID string for a package is formed by combining <code>group</code>, <code>name</code> and <code>version</code> with a dash.</p>
<p>Examples:</p>
<ul>
<li><code>aplteam-APLTreeUtils-3.1.3_alpha</code></li>
<li><code>aplteam-APLTreeUtils-3.1.3-beta</code></li>
<li><code>aplteam-APLTreeUtils-4.0.0</code></li>
</ul>
<p>However, note that due to <a href="http://simver.org/" class="external_link" title="Link to a definition of what SimVer is">SimVer</a> the <code>{major}</code> number is kind of different from <code>{minor}.{patch}</code>; in short these are completely different packages:</p>
<ul>
<li><code>aplteam-APLTreeUtils-1.0.0</code></li>
<li><code>aplteam-APLTreeUtils-2.0.0</code></li>
</ul>
<p>That means they are considered to be as different as <code>aplteam-Foo-1.0.0</code> and <code>aplteam-Goo-1.0.0</code>.</p>
<div class="h_tag">
<a href="#Registry" id="Registry" class="autoheader_anchor">
<h3 data-id="Registry">1.2.4. Registry</h3>
</a>
</div>
<p>A Registry is a collection of files and folders. A Tatin server manages all the packages saved in such a folder and makes them available via a RESTful interface. A Tatin client is capable of accessing local (not managed by a Tatin server) as well as remote (managed) Registries.</p>
<p>A local Registry can be created anywhere on the filesystem where the user has read and write access. (<a href="#Example-for-a-Registry" class="bookmark_link">Link to an example</a>)</p>
<div class="h_tag">
<a href="#Alias" id="Alias" class="autoheader_anchor">
<h3 data-id="Alias">1.2.5. Alias</h3>
</a>
</div>
<p>The term ‚Äúalias‚Äù is used for two different things in this document:</p>
<div class="h_tag">
<a href="#Registry-alias" id="Registry-alias" class="autoheader_anchor">
<h4 data-id="Registry-alias">1.2.5.1. Registry alias</h4>
</a>
</div>
<p>In the <a href="#Client-Settings" class="bookmark_link">client's config file</a> (which can also be referred to as user settings) one can assign an alias to any of the Registries defined in that file. This simplifies addressing a Registry when using the Tatin API.</p>
<p>Note that such an alias is <em>not</em> case sensitive.</p>
<div class="h_tag">
<a href="#Package-alias" id="Package-alias" class="autoheader_anchor">
<h4 data-id="Package-alias">1.2.5.2. Package alias</h4>
</a>
</div>
<p>One can assign an <a href="#Dependency-file" class="bookmark_link">alias to a package dependency</a>. This potentially simplifies addressing a package dependency in the source code.</p>
<div class="h_tag">
<a href="#The-Modules" id="The-Modules" class="autoheader_anchor">
<h2 data-id="The-Modules">1.3. The Modules</h2>
</a>
</div>
<p>Tatin consists of three main modules:</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Name                          </th>
<th style="text-align: left;"> Description </th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#Client" class="bookmark_link"><code>Tatin.Client</code></a></td>
<td>Client</td>
</tr>
<tr>
<td><a href="#Server" class="bookmark_link"><code>Tatin.Server</code></a></td>
<td>Server</td>
</tr>
<tr>
<td><a href="#Registry" class="bookmark_link"><code>Tatin.Registry</code></a></td>
<td>Code that acts on Registries</td>
</tr>
</tbody>
</table>
<p>The three modules interact with each other via clearly defined APIs so as to separate their roles and make it easier to extend in the future.</p>
<p>Notes:</p>
<ul>
<li>The <code>Tatin.Registry</code> module is not used by the APL programmer but by the <code>Tatin.Client</code> and the <code>Tatin.Server</code> modules.</li>
<li>The user interacts with the <code>Tatin.Server</code> module via <code>Tatin.Client</code> which in turn communicates with the Server via the HTTP protocol.</li>
</ul>
<div class="h_tag">
<a href="#Loading-Tatin-into-SE" id="Loading-Tatin-into-SE" class="autoheader_anchor">
<h2 data-id="Loading-Tatin-into-SE">1.4. Loading Tatin into <code>‚éïSE</code></h2>
</a>
</div>
<p>When loaded into <code>‚éïSE</code>, Tatin will be placed into a sub namespace of <code>‚éïSE._Tatin</code>. From a user's perspective this does not matter however because the API (and <em>only</em> the API) will be established in <code>‚éïSE.Tatin</code>.</p>
<div class="h_tag">
<a href="#Loading-packages-into-the-workspace" id="Loading-packages-into-the-workspace" class="autoheader_anchor">
<h2 data-id="Loading-packages-into-the-workspace">1.5. Loading packages into the workspace</h2>
</a>
</div>
<p>Packages will be brought into the WS by establishing them as sub-namespaces within either <code>#._tatin</code> or <code>‚éïSE._tatin</code>. The sub-namespace's name is determined by the full name of the package. For example, for a package <code>example-foo-2.3.1</code> a sub-namespace <code>#|‚éïSE._tatin.example_foo_2_3_1 </code>is established which holds the code and some variables discussed later.</p>
<p>Then a reference is established in the target namespace, that is the namespace the user has specified. For a target namespace <code>#.MyApp</code> that would result in a reference <code>#.MyApp.Foo</code> in case no alias was specified. This reference will point to the API inside <code>#|‚éïSE._tatin.example_foo_2_3_1</code>.</p>
<p>This same mechanism is used for all packages; it makes sure that only the API is exposed to the consumer. Note that the API may be a single function, a class or a namespace, and is defined in the package's optional ‚Äúapi‚Äù config file property.</p>
<div class="h_tag">
<a href="#Client" id="Client" class="autoheader_anchor">
<h2 data-id="Client">1.6. Client (<code>Tatin.Client</code>)</h2>
</a>
</div>
<p>The Client module implements most of the features required in the framework; it is the main module of Tatin. It has its own configuration file (<a href="#Client-Settings" class="bookmark_link">Client Settings</a>) to keep track of user preferences, in particular the Registries the user potentially wants to interact with.</p>
<div class="h_tag">
<a href="#API" id="API" class="autoheader_anchor">
<h3 data-id="API">API</h3>
</a>
</div>
<p>All API functions throw an error in case something goes wrong.</p>
<div class="h_tag">
<a href="#The-InitialisePackage-method" id="The-InitialisePackage-method" class="autoheader_anchor">
<h4 data-id="The-InitialisePackage-method">1.6.1.1. The ‚ÄúInitialisePackage‚Äù method</h4>
</a>
</div>
<p>Syntax: <code>‚ç¨} ‚Üê {configNamespace} InitialisePackage (folder)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>folder</code></td>
<td>string</td>
<td>Name of a folder hosting the package. If empty this defaults to the current directory.</td>
</tr>
<tr>
<td><code>configNamespace</code></td>
<td>namespace</td>
<td>Optional. Typically the result of the function <code>InitPackageConfig</code>. <br>Use this to set parms like ‚Äúgroup‚Äù and ‚Äúname‚Äù etc.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>‚ç¨</code></td>
</tr>
</tbody>
</table>
<p>The <code>InitialisePackage</code> method is used to prepare a folder to be used as a package as well, or to create a new folder designed to hold a package.</p>
<p>Note that when there is already a file ‚Äúapl-package.json‚Äù then <code>InitialisePackage</code> throws an error.</p>
<p>The following actions are performed:</p>
<ol start="1">
<li>If <code>folder</code> does not exist yet, it is created.</li>
<li>If <code>source</code> does not exist yet, then a folder with that name is created within <code>folder</code>.</li>
<li>A config file with default values is created. Note that this needs to be edited by the user since <code>InitialisePackage</code> cannot know the values for <code>group</code>, <code>name</code> and <code>version</code> although they are mandatory; this does not hold in case a left argument was specified.</li>
</ol>
<p>One can specify <code>group</code>, <code>name</code> and <code>version</code> by executing these steps:</p>
<ol start="1">
<li>Create a configuration space by calling <code>InitPackageConfig</code> and assign it to, say, <code>Foo</code></li>
<li>Assign proper values to <code>group</code>, <code>name</code> and <code>version</code> in <code>Foo</code></li>
<li>Specify <code>Foo</code> as left argument to <code>InitialisePackage</code></li>
</ol>
<div class="h_tag">
<a href="#The-Pack-method" id="The-Pack-method" class="autoheader_anchor">
<h4 data-id="The-Pack-method">1.6.1.2. The ‚ÄúPack‚Äù method</h4>
</a>
</div>
<p>Syntax: <code>zipfile ‚Üê Pack (project_path target_path)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>project_path</code></td>
<td>string</td>
<td>Path to a project folder.</td>
</tr>
<tr>
<td><code>target_path</code></td>
<td>string</td>
<td>Path to a target folder where the zipped package is to be created.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>zipfile</code></td>
<td>string</td>
<td>Full path to zipfile created.</td>
</tr>
</tbody>
</table>
<p>The client uses the <code>Pack</code> method to create a zip file that contains all the files needed to publish a package to a Registry.</p>
<p><code>Pack</code> takes a path to a project folder and a target folder. It inspects the project folder and validates that it contains all files required. Then the <a href="#Package-config-file" class="bookmark_link">package config file</a> and the optional <a href="#Dependency-file" class="bookmark_link">Dependency file</a> are checked to ensure they are well formed. If all is fine, it proceeds to add the required files to a zip archive.</p>
<p>Everything the <code>source</code> parameter within the package config file is pointing to is added to the archive. When this parameter is empty the Client Config setting for ‚Äúsource‚Äù is checked. If that is not empty then it is taken. If that is empty, too, then the home folder of the package is investigated: if that carries exactly one sub folder then it is assumed that this folder carries the source code. If there are mutiple folders, or a single folder does not carry any files with APL source code extensions, then an error is thrown.</p>
<p>The optional <code>assets</code> property is a whitelist of files and/or folders that should also be added to the resulting package. This allows adding files to the package that are not source files. The items included in the whitelist will keep their relational structure, e.g. <code>docs/help.md</code> will not only include the help.md file but place it into a docs folder within the package.</p>
<p>Assets must be specified relative to the package source. There is one exception: in case an absolute path is specified but that path is identical to the source path then it's just removed.</p>
<p>The resulting zip file will be named <code>{group}-{name}-{version}.zip</code> and placed in <code>target_path</code>.</p>
<div class="h_tag">
<a href="#The-PublishPackage-method" id="The-PublishPackage-method" class="autoheader_anchor">
<h4 data-id="The-PublishPackage-method">1.6.1.3. The ‚ÄúPublishPackage‚Äù method</h4>
</a>
</div>
<p>Syntax: <code>{‚ç¨} ‚Üê {registry} PublishPackage (package)</code></p>
<p>Publish <code>package</code> to <code>registry</code>.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>package</code></td>
<td>string</td>
<td>Either the path to a package folder or to a package zip file.</td>
</tr>
<tr>
<td><code>registry</code></td>
<td>string</td>
<td>(Optional) URI or alias for a Registry (defaults to ‚ÄúdefaultRegistry‚Äù in client settings).</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>‚ç¨</code></td>
</tr>
</tbody>
</table>
<ul>
<li>If <code>package</code> is a ZIP file then that file was typically created by the <code>Pack</code> method.</li>
<li>If it points to a folder then it is assumed that this is a project folder. In that case <code>PublishPackage</code> calls the method <code>Pack</code> itself, producing the required ZIP file in a temp folder, which is then published to the given Registry.</li>
</ul>
<div class="h_tag">
<a href="#Retrieving-packages" id="Retrieving-packages" class="autoheader_anchor">
<h4 data-id="Retrieving-packages">1.6.1.4. Retrieving packages</h4>
</a>
</div>
<p>Packages retrieved from a Registry can either be saved in a folder, typically in order to become part of a project, or just brought into the workspace, typically to try them out. The former is achieved by the <code>InstallPackage</code> method while the latter is achieved by the <code>LoadPackage</code> method. Installed packages and their dependencies can be brought into the workspace with the <code>LoadDependencies</code> method.</p>
<p>Both methods require an <code>identifier</code> (see below) in order to identify a package in a Registry.</p>
<p>Packages are loaded either into <code>#._tatin</code> or <code>‚éïSE._tatin</code>.</p>
<p>Sub-namespaces are compiled from <code>{groupname}-{packagename}-{version}</code>. Any characters that are not permitted in APL names are replaced by an underscore character (<code>_</code>)</p>
<div class="h_tag">
<a href="#The-identifier" id="The-identifier" class="autoheader_anchor">
<h5 data-id="The-identifier">1.6.1.4.1. The ‚Äúidentifier‚Äù</h5>
</a>
</div>
<p>The <code>identifier</code> may be just a package ID. In that case Tatin attempts to retrieve that package from one of the Registries defined in the Client config file in the order they are defined; the first one wins.</p>
<p>However, usually the <code>identifier</code> carries also information that identifies a particular Registry. It can be specified in different ways.</p>
<ul>
<li>If the HTTP protocol is specified then <code>identifier</code> is a URL identifying a package managed by a Tatin server.</li>
<li>It can also  be an alias as in <code>[MyAlias]</code>.
<p>Note that Tatin allows but does not require a <code>/</code> (or <code>\</code>) between the Registry alias and the package ID.</p></li>
<li>As a path that points to a folder that contains the Registry's <code>tatin_index.json</code> file.</li>
<li><code>identifier</code> can also specify a package locally. In this case the ‚Äúfile://‚Äù protocol must be specified. There are two ways:
<ul>
<li>As a path that points to a package folder. This folder must contain the ZIP file.</li>
<li>As a path that points to a package ZIP file.</li>
</ul></li>
</ul>
<div class="h_tag">
<a href="#Registry-scan" id="Registry-scan" class="autoheader_anchor">
<h6 data-id="Registry-scan">1.6.1.4.1.1. Registry scan</h6>
</a>
</div>
<p>If the <code>identifier</code> is a Package ID then it may be prefixed with a URL or a Registry alias. An alias is defined by surrounding it with square brackets. If this is done then only that Registry is queried for the package in question. If the package cannot be found in the given Registry an error is thrown.</p>
<p>If no Registry is specified, only a Package ID, then all Registries defined in the Client's config file are queried for the package in the order that is specified by the <code>priority</code> property: the Registry with the highest number is scanned first. Once the package with the given package ID is found the scanning stops.</p>
<p>Examples:</p>
<pre><code>https://tatin.com/groupName-packageName-1.1.0-beta
[DYALOG]toolgroup-Conga-3.2.1
aplteam-Conga-3.2.1</code></pre>
<div class="h_tag">
<a href="#InstallPackage" id="InstallPackage" class="autoheader_anchor">
<h5 data-id="InstallPackage">1.6.1.4.2. ‚ÄúInstallPackage‚Äù</h5>
</a>
</div>
<p>Syntax: <code>‚ç¨ ‚Üê InstallPackage (identifier target_folder)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type        </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>identifier</code></td>
<td>string</td>
<td>Specifies a particular package (as described above).</td>
</tr>
<tr>
<td><code>target_folder</code></td>
<td>string</td>
<td>Path to a folder where the specified package is installed.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>‚ç¨</code></td>
</tr>
</tbody>
</table>
<p>The purpose of this method is to retrieve the package (and all its dependencies), unzip it and then copy it to the <code>target_folder</code>. Then the fully qualified package URI is added to the <a href="#Dependency-file" class="bookmark_link">Dependency file</a> in the <code>target_folder</code> (if the file is missing it is created).</p>
<p>Finally the dependency tree is added to the file <code>apl-buildlist.json</code> or, if it does not exist yet, it is created. This file contains all the top-level packages and their dependencies.</p>
<p>This is all done in the file system.</p>
<p>Use the <code>LoadDependencies</code> method to read the <a href="#Dependency-file" class="bookmark_link">Dependency file</a> and load the installed packages into the active workspace.</p>
<p>Note that in case different packages required the same package but with different version numbers then a certain strategy called the ‚Äúminimal version strategy‚Äù is applied. This is quite a complex topic that is discussed in a separate document.</p>
<p>For a detailed general discussion of this strategy see <a href="https://research.swtch.com/vgo" class="external_link">https://research.swtch.com/vgo</a>, in particular the ‚ÄúMinimal Version Selection‚Äù PDF.</p>
<div class="h_tag">
<a href="#UninstallPackage" id="UninstallPackage" class="autoheader_anchor">
<h5 data-id="UninstallPackage">1.6.1.4.3. ‚ÄúUninstallPackage‚Äù</h5>
</a>
</div>
<p>We are going to need an <code>UninstallPackage</code> method at a later stage, although a package can be removed simply by deleting it from the file system.</p>
<div class="h_tag">
<a href="#LoadDependencies" id="LoadDependencies" class="autoheader_anchor">
<h5 data-id="LoadDependencies">1.6.1.4.4. ‚ÄúLoadDependencies‚Äù</h5>
</a>
</div>
<p>Syntax: <code>ref ‚Üê LoadDependencies (target_folder target_space)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter       </th>
<th style="text-align: left;"> Type        </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>target_folder</code></td>
<td>string</td>
<td>Specifies a folder containing previously installed packages.</td>
</tr>
<tr>
<td><code>target_space</code></td>
<td>string</td>
<td>Path to a namespace in the APL workspace.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>‚ç¨</code></td>
</tr>
</tbody>
</table>
<p>This method reads the file ‚Äúapl-buildlist.json‚Äù found in the specified <code>target_folder</code> and then loads the packages from the filesystem into the active workspace, generating the dependency tree as described above.</p>
<p>Note that in the process Tatin will check whether the dependeny file was changed <em>after</em> the build list was created or modified. If so the build list will be re-created.</p>
<p>Use this method to get all packages into the APL workspace that were installed by the <a href="#InstallPackage" class="bookmark_link">InstallPackage</a> method.</p>
<div class="h_tag">
<a href="#LoadPackage" id="LoadPackage" class="autoheader_anchor">
<h5 data-id="LoadPackage">1.6.1.4.5. ‚ÄúLoadPackage‚Äù</h5>
</a>
</div>
<p>Syntax: <code>ref ‚Üê LoadPackage (identifier target_space)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type        </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>identifier</code></td>
<td>string</td>
<td>Specifies a particular package.</td>
</tr>
<tr>
<td><code>target_space</code></td>
<td>string</td>
<td>Path to a namespace in the APL workspace.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
<th style="text-align: left;"> Type      </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ref</code></td>
<td>reference</td>
<td>Reference to the package loaded into the WS.</td>
</tr>
</tbody>
</table>
<p>This method brings the specified package as well as all of its dependencies into the APL workspace but does not store anything in the file system. Use this to load a package dynamically for the duration of the session.</p>
<p>The package is retrieved in one way or another, depending on <code>identifier</code>.</p>
<ul>
<li>If <code>identifier</code> is a package folder then it is loaded from that folder.
<p>Any folder that carries a config file and the source file or source folder specified in that config file qualifies as a package folder.</p></li>
<li>In all other cases <code>LoadPackage</code> unzips the package in a temp folder and then loads the package into the workspace.</li>
</ul>
<p>Note that while <code>LoadPackage</code> attempts to delete the temp folder after having loaded the requested package (and any possible dependencies) into the workspace there is a scenario when the temp folder cannot be deleted and is rather assigned to <code>‚àÜHome_Dir</code> (which otherwise would be empty): when a package depends on file assets in order to function. Naturally these file assets need to be stored somewhere, and the package needs to be able to access them.</p>
<div class="h_tag">
<a href="#Loading-into-the-workspace" id="Loading-into-the-workspace" class="autoheader_anchor">
<h5 data-id="Loading-into-the-workspace">1.6.1.4.6. Loading into the workspace</h5>
</a>
</div>
<p>Loading into the workspace means that the code is established in a namespace path defined by the group, name and version of the package as per:</p>
<p><code>[#|‚éïSE]._tatin.group_name_version</code></p>
<p>All characters in <code>version</code> that are not permitted in APL names are replaced by an underscore (<code>_</code>) character.</p>
<p>The root space <code>[#|‚éïSE]</code> is chosen so that it is the same as for the target_space.</p>
<p>Finally, a reference to the package's API is injected into the <code>target_space</code>. If an alias is defined for that package then the alias defines the name of the reference, otherwise the name of the package is used.</p>
<p>Examples:</p>
<p>Package APLTreeUtils:</p>
<pre class="json"><code>{
  "group": "aplteam",
  "name": "APLTreeUtils",
  "version": "5.1.0",
  "source": "APLSource/",
  "api":  "APLTreeUtils"
}</code></pre>
<p>Load simple:</p>
<pre class="apl"><code>      ref ‚Üê LoadPackage 'aplteam-APLTreeUtils-5.1.0' #.MyApp
      ref
#._tatin.aplteam_APLTreeUtils_5_1_0
      #.MyApp.APLTreeUtils
#._tatin.aplteam_APLTreeUtils_5_1_0.APLTreeUtils</code></pre>
<p>Load using alias ‚ÄúA51‚Äù:</p>
<pre class="apl"><code>      ref ‚Üê LoadPackage 'A51@aplteam-APLTreeUtils-5.1.0' #.MyApp
      ref
#._tatin.aplteam_APLTreeUtils_5_1_0
      #.MyApp.A51
#._tatin.aplteam_APLTreeUtils_5_1_0.APLTreeUtils</code></pre>
<p>Note that loading packages is recursive, and transitive dependencies will therefore be loaded in the same way with references established on each level, thereby creating a tree of dependencies.</p>
<p>These constants are created in each package space:</p>
<ul>
<li><code>‚àÜHOME_DIR</code> specifies the path to the package folder on disk.
<p>This can be referenced by the package code when accessing package resources.</p></li>
<li><code>‚àÜURI</code> carries the name of the Registry or the name of the file/folder the package was originally retrieved from.</li>
<li><code>‚àÜCONFIG</code> carries the package's configuration as readable JSON.</li>
</ul>
<div class="h_tag">
<a href="#Client-Settings" id="Client-Settings" class="autoheader_anchor">
<h3 data-id="Client-Settings">1.6.2. Client Settings</h3>
</a>
</div>
<p>There is a client configuration file tatin-client.json (<a href="#Client-config-file" class="bookmark_link">link to the schema</a>) that keeps track of global user settings.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Property     </th>
<th style="text-align: left;"> Type   </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>registries</code></td>
<td>array</td>
<td>Array of Registry objects.</td>
</tr>
<tr>
<td><code>source</code></td>
<td>bool</td>
<td>Default is empty.</td>
</tr>
</tbody>
</table>
<p>Note: If you publish packages and always use the same name for source folders for packages then specify the name of that folder as <code>source</code> so that it becomes a default. Can be overwritten for a specific package.</p>
<p>An entry in <code>registries</code> would carry these pieces of information:</p>
<table>
<tbody>
<tr>
<td><code>url</code></td>
<td>string</td>
<td>A URL</td>
</tr>
<tr>
<td><code>alias</code></td>
<td>string</td>
<td>Optional</td>
</tr>
<tr>
<td><code>port</code></td>
<td>int</td>
<td>Defaults to 0, meaning that the protocol rules: 80 or 443</td>
</tr>
<tr>
<td><code>priority</code></td>
<td>int</td>
<td>For the first entry this defaults to 100</td>
</tr>
<tr>
<td><code>api_key</code></td>
<td>string</td>
<td>Optional; used for authentication</td>
</tr>
</tbody>
</table>
<p>Note that after the first registry <code>priority</code> defaults to the lowest value minus 10.</p>
<p>By default the user settings are saved/searched for in the user's home folder.</p>
<div class="h_tag">
<a href="#Server" id="Server" class="autoheader_anchor">
<h2 data-id="Server">1.7. Server (<code>Tatin.Server</code>)</h2>
</a>
</div>
<p>The server module implements a RESTful HTTP server. It exposes resources that can be accessed and modified if authorised.</p>
<p>The communication part is handled by Plodder[<a href="#fnref4" class="footnote_link"><sup>4</sup></a>].</p>
<div class="h_tag">
<a href="#Errors" id="Errors" class="autoheader_anchor">
<h3 data-id="Errors">1.7.1. Errors</h3>
</a>
</div>
<p>On error, one of the below HTTP status codes is returned.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Error Code</th>
<th style="text-align: left;"> Error Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Invalid request like an invalid package ID like more than two hyphens.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Authentication or authorization error.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>Requests to a missing resource.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>Server error.</td>
</tr>
<tr>
<td>501</td>
<td>Not implemented</td>
<td>Using an HTTP verb that has not been implemented (PATCH, DELETE, ‚Ä¶)</td>
</tr>
</tbody>
</table>
<div class="h_tag">
<a href="#ContentType" id="ContentType" class="autoheader_anchor">
<h3 data-id="ContentType">1.7.2. ContentType</h3>
</a>
</div>
<div class="h_tag">
<a href="#ServerAPI" id="ServerAPI" class="autoheader_anchor">
<h3 data-id="ServerAPI">API</h3>
</a>
</div>
<p>The API allows listing and adding packages.</p>
<div class="h_tag">
<a href="#List-packages" id="List-packages" class="autoheader_anchor">
<h4 data-id="List-packages">1.7.3.1. List packages</h4>
</a>
</div>
<p><code>GET /v1/packages</code></p>
<p>Available parameters:</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>per_page</code></td>
<td>number</td>
<td>Max number of items returned in result set (default 100).</td>
</tr>
<tr>
<td><code>page</code></td>
<td>number</td>
<td>Current page of the collection (default 1).</td>
</tr>
<tr>
<td><code>group</code></td>
<td>string</td>
<td>Pattern that is matched against group names.</td>
</tr>
<tr>
<td><code>tags</code></td>
<td>string</td>
<td>One or more tags, separated by comma.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>string</td>
<td>Pattern that is matched against package names.</td>
</tr>
</tbody>
</table>
<p>Returns a list with <code>group</code> and <code>name</code> but no versions.</p>
<p><code>GET /v1/package/{ID}</code></p>
<p>Available parameters:</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>per_page</code></td>
<td>number</td>
<td>Max number of items returned in result set (default 100).</td>
</tr>
<tr>
<td><code>page</code></td>
<td>number</td>
<td>Current page of the collection (default 1).</td>
</tr>
</tbody>
</table>
<p><code>ID</code> must specify <code>{group}-{name}</code>.</p>
<p>Lists all versions found for the given package.</p>
<p>Note that you may also specify parts of the version number. All variations supported are:</p>
<pre><code>`GET /v1/package/{group}-{name}`
`GET /v1/package/{group}-{name}-{Major}`
`GET /v1/package/{group}-{name}-{Major.Minor}`</code></pre>
<div class="h_tag">
<a href="#server_publish_package" id="server_publish_package" class="autoheader_anchor">
<h4 data-id="server_publish_package">1.7.3.2. Publish a package</h4>
</a>
</div>
<p><code>POST /{packageID}</code></p>
<p>To publish a package simply POST the package zip file. The response is either 201 (‚ÄúCreated‚Äù) on a successful operation, or an error code otherwise.</p>
<p>The zip file must contain a valid package as defined above.</p>
<p>An authentication key must be provided in the header for the POST to be accepted by the Server.</p>
<div class="h_tag">
<a href="#Get-package" id="Get-package" class="autoheader_anchor">
<h4 data-id="Get-package">1.7.3.3. Get package</h4>
</a>
</div>
<p><code>GET /{package-id}</code></p>
<p>Get a package by providing the fully qualified name for the package, i.e. <code>group-name-version</code>. The response is either 200 on a successful operation or an error code otherwise.</p>
<p>The Content-Type on a successful operation is <code>application/zip</code>.</p>
<div class="h_tag">
<a href="#Tatin-Registry" id="Tatin-Registry" class="autoheader_anchor">
<h2 data-id="Tatin-Registry">1.8. Registry (<code>Tatin_Registry</code>)</h2>
</a>
</div>
<p>This module carries the code that is shared by the client and the server.</p>
<p>The <code>Tatin.Registry</code> module manages the storage and retrieval of packages. No authentication is performed in this module.</p>
<p>This module is called directly by either the client or the server module.</p>
<p>The <code>Tatin.Registry</code> module always acts locally, either under the umbrella of a client or a server.</p>
<div class="h_tag">
<a href="#regapi" id="regapi" class="autoheader_anchor">
<h3 data-id="regapi">API</h3>
</a>
</div>
<div class="h_tag">
<a href="#The-CreateRegistry-method" id="The-CreateRegistry-method" class="autoheader_anchor">
<h4 data-id="The-CreateRegistry-method">1.8.1.1. The <code>CreateRegistry</code> method</h4>
</a>
</div>
<p>Syntax: <code>rc ‚Üê CreateRegistry folder</code></p>
<p>Create a new Registry in <code>folder</code>.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rc</code></td>
<td>number</td>
<td>Return code (0 for success, otherwise error code).</td>
</tr>
</tbody>
</table>
<p>This method is available only for creating a Registry locally (via the Tatin Client) since for a server creating its Registry is either part of the installation (Windows) or the configuration (other operating systems).</p>
<div class="h_tag">
<a href="#create_index" id="create_index" class="autoheader_anchor">
<h4 data-id="create_index">1.8.1.2. The <code>Index.Create</code> method</h4>
</a>
</div>
<p>Syntax: <code> {index} ‚Üê Index.Create force</code></p>
<p>Create index for a Registry.</p>
<p>The index is used for fast search operations. The index is basically a simple vector of folder names that are build by the pattern <code>{group}-{name}-{version}</code>.</p>
<p>It is both returned as a shy result and written to a file <code>tatin_index.json</code> in the Registry's folder.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>force</code></td>
<td>number [0,1]</td>
<td>If <code>1</code> forces re-creation of index even if it already exists.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>index</code></td>
<td>string</td>
<td>simple vector with package folder names, separated by CRs.</td>
</tr>
</tbody>
</table>
<div class="h_tag">
<a href="#Reg_ListPackages" id="Reg_ListPackages" class="autoheader_anchor">
<h4 data-id="Reg_ListPackages">1.8.1.3. The <code>ListPackages</code> method</h4>
</a>
</div>
<p>Syntax: <code>packages ‚Üê ListPackages (pattern)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pattern</code></td>
<td>string</td>
<td>search pattern; do not use anything that cannot be part of a valid package ID.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packages</code></td>
<td>array</td>
<td>List of package IDs.</td>
</tr>
</tbody>
</table>
<p>Search Registry for packages matching <code>pattern</code> which is matched against <code>group</code> and <code>name</code>.</p>
<p>Examples:</p>
<pre><code>[MyAlias]                          ‚çù All packages of the given Registry
[MyAlias]{group}                   ‚çù All packages of the given group</code></pre>
<div class="h_tag">
<a href="#Reg_ListPackageVersions" id="Reg_ListPackageVersions" class="autoheader_anchor">
<h4 data-id="Reg_ListPackageVersions">1.8.1.4. The <code>ListPackageVersions</code> method</h4>
</a>
</div>
<p>Syntax: <code>packages ‚Üê ListPackageVersions (package)</code></p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>package</code></td>
<td>string</td>
<td>must be valid <code>{group}-{name}</code>.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packages</code></td>
<td>array</td>
<td>Array of package config objects (<a href="#Package-config-file" class="bookmark_link">the schema</a> for the given package)</td>
</tr>
</tbody>
</table>
<p>Lists all versions of the given package. If no package with the given <code>group</code> and <code>name</code> can be found then <code>‚ç¨</code> is returned.</p>
<div class="h_tag">
<a href="#registry_publish_package" id="registry_publish_package" class="autoheader_anchor">
<h4 data-id="registry_publish_package">1.8.1.5. The <code>PublishPackage</code> method</h4>
</a>
</div>
<p>Syntax: <code>rc ‚Üê PublishPackage (packageZip)</code></p>
<p>Add a package to the Registry.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packageZip</code></td>
<td>string</td>
<td>Path to zip file containing a package.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rc</code></td>
<td>Boolean</td>
<td>0 for okay</td>
</tr>
</tbody>
</table>
<div class="h_tag">
<a href="#GetPackage" id="GetPackage" class="autoheader_anchor">
<h4 data-id="GetPackage">1.8.1.6. The <code>GetPackage</code> method</h4>
</a>
</div>
<p>Syntax: <code>zipFile ‚Üê GetPackage {packageID}</code></p>
<p>Retrieve a package from the Registry. Returns the path to a package zip file.</p>
<table>
<thead>
<tr>
<th style="text-align: left;"> Parameter </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>packageID</code></td>
<td>string</td>
<td>A <a href="#Package-ID" class="bookmark_link">Package ID</a>.</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align: left;"> Output </th>
<th style="text-align: left;"> Type </th>
<th style="text-align: left;"> Desc </th>
</tr>
</thead>
<tbody>
<tr>
<td><code>zipFile</code></td>
<td>string</td>
<td>File path to package zipfile.</td>
</tr>
</tbody>
</table>
<div class="h_tag">
<a href="#Withdrawing-a-package" id="Withdrawing-a-package" class="autoheader_anchor">
<h4 data-id="Withdrawing-a-package">1.8.1.7. Withdrawing a package (Delete)</h4>
</a>
</div>
<p>We believe that nothing that was published should ever be deleted. For that reason there is no method available to achieve that.</p>
<p>This restriction might be lifted in the future.</p>
<p>However, note that with a local Registry withdrawing a package can be easily achieved anyway by simply removing the folder holding the package. In such a case the index needs to be rebuilt ‚Äî see <a href="#create_index" class="bookmark_link">CreateIndex</a>.</p>
<div class="h_tag">
<a href="#Updating-a-package" id="Updating-a-package" class="autoheader_anchor">
<h4 data-id="Updating-a-package">1.8.1.8. Updating a package</h4>
</a>
</div>
<p>A package cannot be updated. If there is a need to update a package a new version must be created.</p>
<p>This restriction is set in stone and is not negotiable.</p>
<div class="h_tag">
<a href="#Misc" id="Misc" class="autoheader_anchor">
<h2 data-id="Misc">1.9. Misc</h2>
</a>
</div>
<div class="h_tag">
<a href="#Config-and-meta-files" id="Config-and-meta-files" class="autoheader_anchor">
<h3 data-id="Config-and-meta-files">1.9.1. Config and meta files</h3>
</a>
</div>
<div class="h_tag">
<a href="#Client-config-file" id="Client-config-file" class="autoheader_anchor">
<h4 data-id="Client-config-file">1.9.1.1. Client config file</h4>
</a>
</div>
<p>This document comes with a file ‚Äútatin-client-schema.json‚Äù that defines the schema of a package config file.</p>
<p>This file defines some Client-specific parameters, in particular Registries aliases.</p>
<p>Example:</p>
<pre class="json"><code>{
    "defaultRegistry": "tatin",

    "registries": [
        {
            "alias": "",
            "uri": "C:/Users/me/myregistry"
            "port": 0
            "priority": 100
            "api_key": "This and that"
        },
        {
            "alias": "dyalog",
            "uri": "https://packages.dyalog.com",
            "priority": 200
            "api_key": "SomethingDifferent"
        },
        {
            "alias": "myCompany",
            "uri": "http://packages.my-company.com",
            "port": 8080
            "priority": 300
            "api_key": ""
        },
        {
            "alias": "tatin",
            "uri": "http://tatin.com",
            "port": 0
            "priority": 400
            "api_key": ""
        }
    ]
}</code></pre>
<div class="h_tag">
<a href="#Package-config-file" id="Package-config-file" class="autoheader_anchor">
<h4 data-id="Package-config-file">1.9.1.2. Package config file</h4>
</a>
</div>
<p>This file defines a package within a project folder.</p>
<p>This document comes with a file ‚Äúapl-package-schema.json‚Äù that defines the schema of a package config file.</p>
<p>Example:</p>
<pre class="json"><code>{
  "decription": "Date and Time related stuff",
  "assets": [
     "license.txt",
     "README.md"
  ],
  "group": "aplteam",
  "name": "DateAndTime",
  "source": "APLSource/",
  "version": "1.2.0"
}</code></pre>
<p>Note that the trailing slash on <code>source</code> is not required but makes it clear that it is a folder.</p>
<div class="h_tag">
<a href="#Dependency-file" id="Dependency-file" class="autoheader_anchor">
<h4 data-id="Dependency-file">1.9.1.3. Dependency file</h4>
</a>
</div>
<p>The file ‚Äúapl-dependencies.txt‚Äù is a simple text file defining dependencies of a package. It is created/changed by the <code>InstallPackage</code> method, but it might also be edited/changed by a user.</p>
<p>Syntax: <code>alias@packageURI</code> where <code>alias</code> is optional.</p>
<p>Examples:</p>
<pre><code>https://tatin.com/aplteam-Tester2-5.1.0
C:/Repos/MyPrivateRepo/aplteam-Tester2-5.1.0
R@https://packages.carlisle-group.com/carlisle/Rumba/3.2.0</code></pre>
<p>Note that the last line defines an alias ‚ÄúR‚Äù for ‚ÄúRumba‚Äù.</p>
<div class="h_tag">
<a href="#Build-List" id="Build-List" class="autoheader_anchor">
<h4 data-id="Build-List">1.9.1.4. Build List</h4>
</a>
</div>
<p>The file ‚Äúapl-buildlist.json‚Äù is created by Tatin when the <code>InstallPackage</code> is invoked</p>
<p>This file is used to rebuild an application. It is created by traversing the file ‚Äúapl-dependencies.txt‚Äù.</p>
<p>Note that the file will be re-created if Tatin finds that the file ‚Äúapl-dependencies.txt‚Äù was changed after the build list file was created.</p>
<p>The file makes sure that rebuilding the application without changing the dependency file will always result in exactly the same build.</p>
<div class="h_tag">
<a href="#Data-storage-in-Registries" id="Data-storage-in-Registries" class="autoheader_anchor">
<h3 data-id="Data-storage-in-Registries">1.9.2. Data storage in Registries</h3>
</a>
</div>
<div class="h_tag">
<a href="#Overview-1" id="Overview-1" class="autoheader_anchor">
<h4 data-id="Overview-1">1.9.2.1. Overview</h4>
</a>
</div>
<p>Data is stored in the file system: there is no database involved.</p>
<p>When a Registry is managed by a Server a file <code>tatin_index.json</code> will be created. The file will be re-created whenever the Server is started.</p>
<p>Meta data regarding packages might be stored at a later stage in sub folders following certain naming conventions.</p>
<div class="h_tag">
<a href="#Example-for-a-Registry" id="Example-for-a-Registry" class="autoheader_anchor">
<h4 data-id="Example-for-a-Registry">1.9.2.2. Example for a Registry</h4>
</a>
</div>
<p>If the name of the folder holding a Registry is <code>Foo</code> then this is how the content of a Registry would like like:</p>
<pre><code>/Foo/
  Group1-Pack_1-1.0.0/
    apl-package.json
    apl-dependencies.txt
    Group1-Pack_1-1.0.0.zip
  Group1-Pack_1-2.0.0/
    apl-package.json
    apl-dependencies.txt
    Group1-Pack_1-2.0.0.zip
  Group1-Pack_1-2.1.0/
    apl-package.json
    apl-dependencies.txt
    Group1-Pack_1-2.1.0.zip
  Group1-Pack_2-1.1.0/
    apl-package.json
    apl-dependencies.txt
    Group1-Pack_2-3.0.0.zip
  Group2-Pack_1-1.0.0/
    apl-package.json
    apl-dependencies.txt
    Group2-Pack_1-1.0.0.zip
  Group1-Pack_b-1.0.0/
    apl-package.json
    apl-dependencies.txt
    Group2-Pack_b-1.0.0.zip
  Group1-Pack_c-1.0.0/
    apl-package.json
    apl-dependencies.txt
    Group2-Pack_c-1.0.0.zip</code></pre>
<p>Note that packages in different groups may share the same name.</p>
<p>A Registry might live on a different machine; then the client must access any packages within that Registry via the HTTP protocol and the server's REST interface.</p>
<p>A Registry might live locally. In that case it can also be addressed via the file protocol. If no Tatin server is running on the local machine then this is the only way to access the Registry, though one could access a single zipped file comprising a package by passing a full path.</p>
<p>In such a case the last part of the path will be converted into a package ID automatically.</p>
<div class="h_tag">
<a href="#CPU-versus-disk-space" id="CPU-versus-disk-space" class="autoheader_anchor">
<h2 data-id="CPU-versus-disk-space">1.10. CPU versus disk space</h2>
</a>
</div>
<p>It is not clear whether packages should be saved as ZIP files <em><strong>and</strong></em> unzipped as well. The ZIP files are required for delivery. Keeping the package unzipped might speed up some search operations. Those will certainly be needed at a later stage, for example searching for particular code snippets or comments etc. However, the package configuration file and the dependency file are always available unzipped.</p>
<p>For the time being the packages are stored unzipped in a sub-folder <code>data\</code>. This can be switched off, and all the <code>data\</code> folders deleted, without causing trouble.</p>
<div class="h_tag">
<a href="#Authentication" id="Authentication" class="autoheader_anchor">
<h3 data-id="Authentication">1.10.1. Authentication</h3>
</a>
</div>
<p>Bearer authentication is used when accessing protected resources. API keys can be generated by authenticated users with specific access permissions.</p>
<p>For the time being there is just one API key used for POST operations in order to simulate authentication which will be implemented at a later stage.</p>
<div id="footnotes_div">
<hr>
<p><strong>Footnotes</strong></p>
<ol>
<li id="fnref1"><p><code>Link</code> from Dyalog is designed to link any ordinary namespace in an APL workspace to a folder. APL objects changed via the editor are automatically saved/changed in that folder or a sub folder. <br> <a href="https://github.com/Dyalog/link" class="external_link">https://github.com/Dyalog/link</a></p><a href="#fnref1" class="footnote_anchor"></a>
<li id="fnref2"><p><code>acre</code> is a project management tool written by Phil Last and supported by the Carlisle Group that allows saving APL objects automatically in files. <br> <a href="https://github.com/the-carlisle-group/Acre-Desktop" class="external_link">https://github.com/the-carlisle-group/Acre-Desktop</a></p><a href="#fnref2" class="footnote_anchor"></a>
<li id="fnref3"><p>Git is a distributed version-control system for tracking changes in source code during software development. <br> <a href="https://en.wikipedia.org/wiki/Git" class="external_link">https://en.wikipedia.org/wiki/Git</a></p><a href="#fnref3" class="footnote_anchor"></a>
<li id="fnref4"><p><code>Plodder</code> is a generic HTTP server that allows to easily implement any HTTP server. <br> <a href="https://github.com/aplteam/Plodder" class="external_link">https://github.com/aplteam/Plodder</a></p><a href="#fnref4" class="footnote_anchor"></a>
</ol>
</div>
</body>
</html>